{% extends "base.html" %}
{% block content %}
<div class="space-y-8">
  <section class="panel">
    <h2 class="panel-title text-slate-900">Método de Gauss</h2>
    <p class="text-slate-600 mb-4">
      Este método realiza la <strong>eliminación hacia adelante</strong> para obtener una
      <em>matriz triangular superior</em>. No aplica retro-sustitución ni reducción completa.
    </p>

    <div class="grid grid-cols-1 sm:grid-cols-5 gap-4 items-end">
      <label class="block">
        <span class="lbl">Ecuaciones (filas)</span>
        <input id="inp-filas" type="number" min="1" max="100" value="3" class="input" />
      </label>
      <label class="block">
        <span class="lbl">Incógnitas (columnas sin b)</span>
        <input id="inp-columnas" type="number" min="1" max="100" value="3" class="input" />
      </label>
      <label class="block">
        <span class="lbl">Precisión</span>
        <select id="sel-precision" class="input">
          <option value="fraccion">Fracciones exactas</option>
          <option value="decimal">Decimales</option>
        </select>
      </label>
      <label class="block">
        <span class="lbl">Decimales (si aplica)</span>
        <input id="inp-decimales" type="number" min="0" max="12" value="6" class="input" />
      </label>
      <div class="block">
        <button id="btn-crear" class="btn-primary w-full">Crear matriz</button>
      </div>
    </div>
  </section>

  <section id="zona-tabla" class="panel hidden">
    <div class="flex items-center justify-between mb-3">
      <h3 class="text-lg font-semibold text-slate-900">Matriz aumentada</h3>
      <div class="text-sm text-slate-500">Última columna: término independiente <em>b</em>.</div>
    </div>

    <div
      class="overflow-auto max-h-[50vh] rounded-xl border border-slate-200"
      id="tabla-scroll"
    >
      <table id="tabla-matriz" class="matrix-table w-full"></table>
    </div>

    <div class="mt-4 keypad">
      <button class="key" data-ins="(">(</button>
      <button class="key" data-ins=")">)</button>
      <button class="key" data-ins="+">+</button>
      <button class="key" data-ins="-">−</button>
      <button class="key" data-ins="*">×</button>
      <button class="key" data-ins="/">÷</button>
      <button class="key" data-ins="x^">x²</button>
      <button class="key" data-ins="sqrt()">√</button>
      <button class="key" data-ins="sin()">sin</button>
      <button class="key" data-ins="cos()">cos</button>
      <button class="key" data-ins="tan()">tan</button>
      <button class="key" data-ins="pi">π</button>
      <button class="key" data-ins="e">e</button>
      <button class="key wide" data-ins="frac(, )">a/b</button>
      <span class="tip">Tip: usa <code>frac(a,b)</code> o <code>3/4</code>.</span>
    </div>

    <div class="mt-6 flex flex-wrap items-center gap-3">
      <button id="btn-resolver-gauss" class="btn-accent">Resolver (Gauss)</button>
      <span id="msg" class="text-sm text-slate-500"></span>
    </div>
  </section>

  <section id="zona-pasos" class="space-y-4 hidden">
    <h3 class="text-lg font-semibold text-slate-900">Pasos del método de Gauss</h3>
    <div id="contenedor-pasos" class="space-y-6"></div>
  </section>

  <section id="zona-final" class="panel final-card hidden">
    <h3 class="text-lg font-semibold mb-2 text-slate-900">Resultado final</h3>
    <p id="final-desc" class="text-slate-800"></p>
    <div class="mt-6">
      <button id="btn-pdf-gauss" class="btn-ghost">Descargar PDF</button>
    </div>
  </section>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/gauss_simple.js') }}" defer></script>
{% endblock %}
